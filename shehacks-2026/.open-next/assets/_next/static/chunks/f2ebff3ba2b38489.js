(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,74122,e=>{"use strict";var r=e.i(43476),o=e.i(71645);let t=[{id:"washroom",name:"Washroom"},{id:"elevator",name:"Elevator"},{id:"mainhall",name:"Main Hall"},{id:"exitdoor",name:"Exit Door"}];e.s(["default",0,()=>{let[e,n]=(0,o.useState)(!1),[s,i]=(0,o.useState)(null),[c,l]=(0,o.useState)("Click to start listening for checkpoints"),a=(0,o.useRef)(null);return(0,o.useEffect)(()=>()=>{if(a.current)try{a.current.stop()}catch(e){}window.speechSynthesis&&window.speechSynthesis.cancel()},[]),(0,r.jsxs)("div",{className:"p-4 border rounded-lg shadow-sm",children:[(0,r.jsx)("button",{onClick:e?()=>{if(a.current)try{a.current.stop()}catch(e){}n(!1),l("Stopped listening")}:()=>{let e=window.SpeechRecognition||window.webkitSpeechRecognition;if(!e){alert("Speech Recognition is not supported in this browser. Try Chrome!"),l("Speech Recognition not supported");return}let r=!1,o=()=>{if(r)return;let s=new e;s.lang="en-US",s.continuous=!0,s.interimResults=!1,s.onstart=()=>{n(!0),l("Listening for checkpoint keywords..."),console.log("Listening started...")},s.onend=()=>{n(!1),console.log("Listening ended."),r||setTimeout(()=>{if(!r)try{o()}catch(e){console.error("Error restarting recognition:",e)}},100)},s.onresult=e=>{let r=e.results[e.results.length-1][0].transcript,o=r.toLowerCase().trim();console.log("ðŸŽ¤ Speech-to-Text [VoiceController]:",{raw:r,processed:o,confidence:e.results[e.results.length-1][0].confidence});let n=null;for(let[e,r]of Object.entries({washroom:"washroom","wash room":"washroom",bathroom:"washroom","bath room":"washroom",restroom:"washroom",elevator:"elevator","main hall":"mainhall",mainhall:"mainhall","exit door":"exitdoor",exitdoor:"exitdoor",exit:"exitdoor"}))if(o.includes(e)){n=r,console.log(`âœ… Keyword matched: "${e}" â†’ ${r}`);break}if(n){let e=t.find(e=>e.id===n);e&&(console.log(`ðŸŽ¯ Checkpoint matched: ${e.name}`),i(e.name),l(`Checkpoint detected: ${e.name}`),(e=>{if(!window.speechSynthesis)return console.warn("SpeechSynthesis not supported");try{window.speechSynthesis.cancel();let r=new SpeechSynthesisUtterance(e);r.lang="en-US",r.rate=1,r.pitch=1,r.volume=1,r.onerror=e=>{console.error("SpeechSynthesis error:",e)},window.speechSynthesis.speak(r)}catch(e){console.error("TTS Error:",e)}})(`Checkpoint detected: ${e.name}`))}else console.log("âŒ No checkpoint matched for:",o),l(`Heard: "${o}" - No checkpoint matched`)},s.onerror=e=>{console.error("Speech Recognition Error:",e.error),"not-allowed"===e.error?(l("Microphone permission denied. Please enable microphone access."),n(!1),r=!0):"aborted"!==e.error&&"no-speech"!==e.error&&(n(!1),r||setTimeout(()=>{if(!r)try{o()}catch(e){console.error("Error restarting after error:",e)}},1e3))},a.current=s;try{s.start()}catch(e){console.error("Error starting recognition:",e),n(!1),l("Error starting speech recognition")}};return o(),()=>{if(r=!0,a.current)try{a.current.stop()}catch(e){}n(!1)}},className:`px-4 py-2 rounded font-bold text-white mb-4 ${e?"bg-red-500 hover:bg-red-600":"bg-green-600 hover:bg-green-700"}`,children:e?"ðŸŽ¤ Stop Listening":"ðŸŽ¤ Start Listening"}),(0,r.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,r.jsx)("strong",{children:"Status:"})," ",c]}),s&&(0,r.jsxs)("div",{className:"mt-3 p-3 bg-blue-100 border border-blue-300 rounded-lg",children:[(0,r.jsx)("div",{className:"text-sm font-semibold text-blue-800",children:"Last Matched Checkpoint:"}),(0,r.jsx)("div",{className:"text-lg font-bold text-blue-900 mt-1",children:s})]}),(0,r.jsxs)("div",{className:"mt-4 text-xs text-gray-500",children:[(0,r.jsx)("div",{className:"font-semibold mb-1",children:"Available checkpoints:"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:t.map(e=>(0,r.jsx)("span",{className:"px-2 py-1 bg-gray-100 rounded",children:e.name},e.id))})]})]})]})}])}]);